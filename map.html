<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Display a map on a webpage</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<style>
   .mapboxgl-popup {
    max-width: 400px;
    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
</style>
<div id="map"></div>
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiZmxhc2hnb2tsZXNzIiwiYSI6ImNsbTN0bWhkMTJocmszZHM2ZXpvYXF4enEifQ.qAfJFK7b7vG2xVpnnffFYw';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/mapbox/light-v11', // style URL
        center: [37.6173, 55.7558], // starting position [lng, lat]
        zoom: 10 // starting zoom
    });

    map.on('load', () => {
        map.addSource('way', {
            type: 'geojson',
            // Use a URL for the value for the `data` property.
            data: 'https://raw.githubusercontent.com/FlashgoKless/cvts/main/railway_example.geojson'
            });
 
        map.addLayer({
            'id': 'way-layer',
            'type': 'line',
            'source': 'way',
            'paint': {
                'line-color': '#FFBF00',
                'line-width': 5
            }
        });
    });

    const overlay = document.getElementById('map-overlay');
 
    // Create a popup, but don't add it to the map yet.
    const popup = new mapboxgl.Popup({
        closeButton: false
    });
  
  
  
 // Add filled county polygons
 // for highlighted display.
    map.addLayer(
        {
            'id': 'way-highlighted',
            'type': 'line',
            'source': 'way',
            'paint': {
                'fill-outline-color': '#ffffff',
                'fill-color': '#ffffff',
                'fill-opacity': 0.75
            },
        // Display none by adding a
        // filter with an empty string.
            'filter': ['name']
        }
    );
  
    map.on('mousemove', 'way', (e) => {
 // Change the cursor style as a UI indicator.
    map.getCanvas().style.cursor = 'pointer';
  
 // Use the first found feature.
    const feature = e.features[0];
  
 // Query the counties layer visible in the map.
 // Only onscreen features are returned.
 // Use filter to collect only results
 // with the same county name.
    const relatedWay = map.querySourceFeatures('way', {
        filter: ['name', feature.properties.name]
    });
  
  
  
 // Render found features in an overlay.
    const title = document.createElement('strong');
    title.textContent =
    feature.properties.name +
    'Линия Москва - СПб';
  
  
    overlay.innerHTML = '';
    overlay.style.display = 'block';
  
    overlay.appendChild(title);
  
 // Add features with the same county name
 // to the highlighted layer.
    map.setFilter('way-highlighted', [
    'name',
    feature.properties.name
    ]);
  
 // Display a popup with the name of the county.
    popup
    .setLngLat(e.lngLat)
    .setText(feature.properties.name)
    .addTo(map);
    });
  
    map.on('mouseleave', 'way', () => {
        map.getCanvas().style.cursor = '';
        popup.remove();
        map.setFilter('way-highlighted', ['name']);
        overlay.style.display = 'none';
    });

</script>

</body>
</html>